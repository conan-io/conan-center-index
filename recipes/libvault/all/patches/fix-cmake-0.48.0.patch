--- a/CMakeLists.txt	2022-01-27 16:19:57.627069144 -0500
+++ b/CMakeLists.txt	2022-01-27 17:26:22.328337704 -0500
@@ -14,12 +14,13 @@
 option(BUILD_SHARED_LIBS "Build vault as a shared library" ON)
 option(INSTALL "Run install targets" ON)
 
-find_package(CURL)
-if (CURL_FOUND)
-  include_directories(${CURL_INCLUDE_DIR})
-else (CURL_FOUND)
-  message(FATAL_ERROR "CURL not found")
-endif (CURL_FOUND)
+OPTION(UseCurl "UseCurl" ON)
+IF (UseCurl)
+    FIND_PACKAGE(CURL)
+    IF (CURL_FOUND)
+        target_link_libraries("CURL::libcurl")
+    ENDIF()
+ENDIF()
 
 include(GNUInstallDirs)
 include_directories("${PROJECT_SOURCE_DIR}/lib")
@@ -150,25 +151,9 @@
   write_basic_package_version_file(
           ${CMAKE_CURRENT_BINARY_DIR}/libvaultConfigVersion.cmake
           COMPATIBILITY SameMajorVersion)
-
-  install(FILES "${CMAKE_CURRENT_BINARY_DIR}/libvaultConfig.cmake"
-          "${CMAKE_CURRENT_BINARY_DIR}/libvaultConfigVersion.cmake"
-          DESTINATION "${CMAKE_INSTALL_LIBDIR}/cmake/libvault")
-
-  configure_file(vault.pc.in vault.pc @ONLY)
-  install(FILES "${CMAKE_BINARY_DIR}/${PROJECT_NAME}.pc"
-          DESTINATION "${CMAKE_INSTALL_LIBDIR}/pkgconfig")
 endif (INSTALL)
 
 if (ENABLE_TEST)
-  include(FetchContent)
-  FetchContent_Declare(
-          Catch2
-          GIT_SHALLOW    TRUE
-          GIT_REPOSITORY https://github.com/catchorg/Catch2.git
-          GIT_TAG        v2.13.6)
-  FetchContent_MakeAvailable(Catch2)
-  list(APPEND CMAKE_MODULE_PATH ${Catch2_SOURCE_DIR}/contrib)
   enable_testing()
 
   add_executable(libvault_test test/test.cpp)
@@ -176,7 +161,7 @@
   target_include_directories(libvault_test PRIVATE include)
 
   target_link_libraries(libvault_test vault)
-  target_link_libraries(libvault_test curl)
+  target_link_libraries(libvault_test CURL::libcurl)
   target_link_libraries(libvault_test Catch2::Catch2)
 
   include(CTest)
