diff --git a/contrib/zlib/zutil.h b/contrib/zlib/zutil.h
index 24ab06b..4d74fc6 100644
--- a/contrib/zlib/zutil.h
+++ b/contrib/zlib/zutil.h
@@ -124,7 +124,8 @@ extern z_const char * const z_errmsg[10]; /* indexed by 2-zlib_error */
 #    if defined(__MWERKS__) && __dest_os != __be_os && __dest_os != __win32_os
 #      include <unix.h> /* for fdopen */
 #    else
-#      ifndef fdopen
+#      /* Modern macOS has fdopen, don't redefine it */
+#      if !defined(__APPLE__) && !defined(fdopen)
 #        define fdopen(fd,mode) NULL /* No fdopen() */
 #      endif
 #    endif
