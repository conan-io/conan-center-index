--- a/contrib/modules/sfm/CMakeLists.txt
+++ b/contrib/modules/sfm/CMakeLists.txt
@@ -30,8 +30,14 @@ endif()
 if(NOT DEFINED GLOG_INCLUDE_DIRS AND DEFINED GLOG_INCLUDE_DIR)
   set(GLOG_INCLUDE_DIRS "${GLOG_INCLUDE_DIR}")
 endif()
+if(NOT GFLAGS_LIBRARIES AND TARGET gflags::gflags)
+  set(GFLAGS_LIBRARIES gflags::gflags)
+endif()
+if(NOT GLOG_LIBRARIES AND TARGET glog::glog)
+  set(GLOG_LIBRARIES glog::glog)
+endif()
 
-if((gflags_FOUND OR Gflags_FOUND OR GFLAGS_FOUND OR GFLAGS_INCLUDE_DIRS) AND (glog_FOUND OR Glog_FOUND OR GLOG_FOUND OR GLOG_INCLUDE_DIRS))
+if(0)
   set(__cache_key "${GLOG_INCLUDE_DIRS} ~ ${GFLAGS_INCLUDE_DIRS} ~ ${GLOG_LIBRARIES} ~ ${GFLAGS_LIBRARIES}")
   if(NOT DEFINED SFM_GLOG_GFLAGS_TEST_CACHE_KEY OR NOT (SFM_GLOG_GFLAGS_TEST_CACHE_KEY STREQUAL __cache_key))
     set(__fname "${CMAKE_CURRENT_LIST_DIR}/cmake/checks/check_glog_gflags.cpp")
@@ -54,7 +60,7 @@ if((gflags_FOUND OR Gflags_FOUND OR GFLAGS_FOUND OR GFLAGS_INCLUDE_DIRS) AND (gl
   unset(__cache_key)
   set(SFM_DEPS_OK "${SFM_GLOG_GFLAGS_TEST}")
 else()
-  set(SFM_DEPS_OK FALSE)
+  set(SFM_DEPS_OK TRUE)
 endif()
 
 if(NOT HAVE_EIGEN OR NOT SFM_DEPS_OK)
--- a/contrib/modules/sfm/src/libmv_light/libmv/correspondence/CMakeLists.txt
+++ b/contrib/modules/sfm/src/libmv_light/libmv/correspondence/CMakeLists.txt
@@ -8,7 +8,7 @@ FILE(GLOB CORRESPONDENCE_HDRS *.h)
 
 ADD_LIBRARY(correspondence STATIC ${CORRESPONDENCE_SRC} ${CORRESPONDENCE_HDRS})
 
-TARGET_LINK_LIBRARIES(correspondence LINK_PRIVATE ${GLOG_LIBRARY} multiview)
+TARGET_LINK_LIBRARIES(correspondence LINK_PRIVATE ${GLOG_LIBRARIES} multiview)
 IF(TARGET Eigen3::Eigen)
   TARGET_LINK_LIBRARIES(correspondence LINK_PUBLIC Eigen3::Eigen)
 ENDIF()
--- a/contrib/modules/sfm/src/libmv_light/libmv/multiview/CMakeLists.txt
+++ b/contrib/modules/sfm/src/libmv_light/libmv/multiview/CMakeLists.txt
@@ -17,7 +17,7 @@ SET(MULTIVIEW_SRC conditioning.cc
 FILE(GLOB MULTIVIEW_HDRS *.h)
 
 ADD_LIBRARY(multiview STATIC ${MULTIVIEW_SRC} ${MULTIVIEW_HDRS})
-TARGET_LINK_LIBRARIES(multiview LINK_PRIVATE ${GLOG_LIBRARY} numeric)
+TARGET_LINK_LIBRARIES(multiview LINK_PRIVATE ${GLOG_LIBRARIES} numeric)
 IF(TARGET Eigen3::Eigen)
   TARGET_LINK_LIBRARIES(multiview LINK_PUBLIC Eigen3::Eigen)
 ENDIF()
