--- a/cmake/CMakeLists.txt
+++ b/cmake/CMakeLists.txt
@@ -335,7 +335,9 @@ endif()
 # Otherwise it will find components needed for CGAL and we might some libraries.
 if(WITH_CGAL)
     find_package(CGAL REQUIRED)
-    set(CGAL_LIBRARIES IFCOPENSHELL_CGAL)
+    set(CGAL_LIBRARIES CGAL::CGAL)
+    add_definitions(-DIFOPSH_WITH_CGAL)
+    set(SWIG_DEFINES ${SWIG_DEFINES} -DIFOPSH_WITH_CGAL)
     list(APPEND GEOMETRY_KERNELS cgal)
 endif()
 
--- a/src/ifcgeom/CMakeLists.txt
+++ b/src/ifcgeom/CMakeLists.txt
@@ -1,7 +1,7 @@
 add_subdirectory(kernels)
 set(kernel_libraries ${kernel_libraries} PARENT_SCOPE)
 
-if((BUILD_CONVERT OR BUILD_IFCPYTHON) AND WITH_OPENCASCADE)
+if((BUILD_CONVERT OR BUILD_IFCPYTHON OR BUILD_IFCGEOM) AND WITH_OPENCASCADE)
     add_subdirectory(Serialization)
     set(IFCOPENSHELL_LIBRARIES ${IFCOPENSHELL_LIBRARIES} PARENT_SCOPE)
 endif()
--- a/src/ifcgeom/Serialization/schema/CMakeLists.txt
+++ b/src/ifcgeom/Serialization/schema/CMakeLists.txt
@@ -1,10 +1,14 @@
 foreach(schema ${SCHEMA_VERSIONS})
-    add_library(geometry_serializer_ifc${schema} OBJECT Serialization.cpp)
+    add_library(geometry_serializer_ifc${schema} Serialization.cpp)
     target_link_libraries(geometry_serializer_ifc${schema} ${OpenCASCADE_LIBRARIES})
     set_target_properties(
         geometry_serializer_ifc${schema}
         PROPERTIES COMPILE_FLAGS "-DIFC_GEOMSERIALIZATION_EXPORTS -DIfcSchema=Ifc${schema}"
     )
+    install(
+        TARGETS geometry_serializer_ifc${schema}
+        EXPORT ${IFCOPENSHELL_EXPORT_TAGETS}
+    )
     list(APPEND geometry_serializer_libraries geometry_serializer_ifc${schema})
 endforeach()
 set(geometry_serializer_libraries ${geometry_serializer_libraries} PARENT_SCOPE)
--- a/src/ifcgeom/kernels/CMakeLists.txt
+++ b/src/ifcgeom/kernels/CMakeLists.txt
@@ -23,7 +23,6 @@ foreach(kernel ${GEOMETRY_KERNELS})
 
     if(${kernel} STREQUAL "cgal")
         find_package(CGAL REQUIRED)
-        target_link_libraries(${KERNEL_TARGET} IFCOPENSHELL_CGAL)
         set_property(TARGET ${KERNEL_TARGET} APPEND_STRING PROPERTY COMPILE_FLAGS " -DCGAL_HAS_THREADS")
 
         set(KERNEL_TARGET_SIMPLE "${KERNEL_TARGET}_simple")
@@ -33,8 +32,7 @@ foreach(kernel ${GEOMETRY_KERNELS})
             PROPERTIES COMPILE_FLAGS "-DIFC_GEOM_EXPORTS -DIFOPSH_SIMPLE_KERNEL -DCGAL_HAS_THREADS"
         )
         list(APPEND kernel_libraries ${KERNEL_TARGET_SIMPLE})
-        target_link_libraries(${KERNEL_TARGET_SIMPLE} ${${KERNEL_UPPER}_LIBRARIES} Eigen3::Eigen)
-        target_link_libraries(${KERNEL_TARGET_SIMPLE} IFCOPENSHELL_CGAL)
+        target_link_libraries(${KERNEL_TARGET_SIMPLE} ${${KERNEL_UPPER}_LIBRARIES} IfcGeom Eigen3::Eigen)
         install(TARGETS ${KERNEL_TARGET_SIMPLE} EXPORT ${IFCOPENSHELL_EXPORT_TARGETS})
     elseif(${kernel} STREQUAL "opencascade")
         target_link_libraries(${KERNEL_TARGET} ${OpenCASCADE_LIBRARIES})
--- a/src/ifcparse/CMakeLists.txt
+++ b/src/ifcparse/CMakeLists.txt
@@ -49,7 +49,9 @@ else()
     target_link_libraries(IfcParse ${Boost_LIBRARIES} ${BCRYPT_LIBRARIES})
 endif()
 
-target_link_libraries(IfcParse ${ROCKSDB_LIBRARIES})
+if(WITH_ROCKSDB)
+    target_link_libraries(IfcParse ${ROCKSDB_LIBRARIES})
+endif()
 
 install(
     TARGETS IfcParse
--- a/src/serializers/CMakeLists.txt
+++ b/src/serializers/CMakeLists.txt
@@ -32,6 +32,7 @@ target_link_libraries(
         ${GLTF_LIBRARIES}
         IfcGeom
         ${OpenCASCADE_LIBRARIES}
+        ${ROCKSDB_LIBRARIES}
         ${kernel_libraries}
         IfcParse
 )
--- a/src/serializers/schema_dependent/CMakeLists.txt
+++ b/src/serializers/schema_dependent/CMakeLists.txt
@@ -3,16 +3,18 @@ file(GLOB SERIALIZERS_S_CPP_FILES *.cpp)
 set(SERIALIZERS_S_FILES ${SERIALIZERS_S_H_FILES} ${SERIALIZERS_S_CPP_FILES})
 
 foreach(schema ${SCHEMA_VERSIONS})
-    add_library(Serializers_ifc${schema} OBJECT ${SERIALIZERS_S_FILES})
+    add_library(Serializers_ifc${schema} ${SERIALIZERS_S_FILES})
     set(SERIALIZER_SCHEMA_LIBRARIES ${SERIALIZER_SCHEMA_LIBRARIES} Serializers_ifc${schema})
     set_target_properties(
         Serializers_ifc${schema}
         PROPERTIES COMPILE_FLAGS "-DIFC_GEOM_EXPORTS -DIfcSchema=Ifc${schema}"
     )
-    target_link_libraries(Serializers_ifc${schema} ${HDF5_LIBRARIES} ${GLTF_LIBRARIES})
+    target_link_libraries(Serializers_ifc${schema} ${HDF5_LIBRARIES} ${GLTF_LIBRARIES} ${ROCKSDB_LIBRARIES})
     if(NOT WASM_BUILD)
         target_link_libraries(Serializers_ifc${schema} IfcGeom ${OpenCASCADE_LIBRARIES})
     endif()
+
+    install(TARGETS Serializers_ifc${schema})
 endforeach()
 
 set(SERIALIZER_SCHEMA_LIBRARIES ${SERIALIZER_SCHEMA_LIBRARIES} PARENT_SCOPE)
--- a/src/svgfill/CMakeLists.txt
+++ b/src/svgfill/CMakeLists.txt
@@ -42,7 +42,7 @@ file(GLOB LIB_H_FILES src/*.h)
 file(GLOB LIB_CPP_FILES src/svgfill.cpp src/arrange_polygons.cpp)
 set(LIB_SRC_FILES ${LIB_H_FILES} ${LIB_CPP_FILES})
 add_library(svgfill ${LIB_SRC_FILES})
-target_link_libraries(svgfill ${Boost_LIBRARIES} ${BCRYPT_LIBRARIES} LibXml2::LibXml2 IFCOPENSHELL_CGAL)
+target_link_libraries(svgfill ${Boost_LIBRARIES} ${BCRYPT_LIBRARIES} LibXml2::LibXml2 ${CGAL_LIBRARIES})
 set_target_properties(svgfill PROPERTIES PUBLIC_HEADER "${LIB_H_FILES}")
 
 add_executable(svgfill_exe src/main.cpp)
-- 

