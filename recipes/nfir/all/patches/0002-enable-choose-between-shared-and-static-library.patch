From c41a24630cefbb2c43a324522b6c6fe4ca994679 Mon Sep 17 00:00:00 2001
From: Tomas Krupa <tomas.krupa@innovatrics.com>
Date: Mon, 24 Feb 2025 12:03:38 +0100
Subject: [PATCH] enable choose between shared and static library

---
 CMakeLists.txt         |  2 +-
 src/lib/CMakeLists.txt | 13 ++++++++++++-
 2 files changed, 13 insertions(+), 2 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 2fb3e93..5580958 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -14,7 +14,7 @@ cmake_minimum_required(VERSION 3.10)
 set(CMAKE_CXX_STANDARD 17)
 set(CMAKE_CXX_STANDARD_REQUIRED ON)
 
-project(NFIR_ITL)
+project(NFIR_ITL VERSION 0.2.0)
 
 # if(USE_OPENCV)
 #   project(NFIR_ITL VERSION 0.2.1)
diff --git a/src/lib/CMakeLists.txt b/src/lib/CMakeLists.txt
index e8f87c6..14f0953 100644
--- a/src/lib/CMakeLists.txt
+++ b/src/lib/CMakeLists.txt
@@ -4,7 +4,18 @@ project(${PROJECT_NAME})
 option(USE_NFIMM "Enable NFIMM" ON)
 
 FILE(GLOB sources ${CMAKE_CURRENT_SOURCE_DIR}/*.cpp)
-add_library( ${PROJECT_NAME} ${sources} )
+if(BUILD_SHARED)
+  add_library( ${PROJECT_NAME} SHARED ${sources} )
+else()
+  add_library( ${PROJECT_NAME} STATIC ${sources} )
+endif()
+
+set_target_properties(${PROJECT_NAME}
+  PROPERTIES
+  RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/bin"
+  LIBRARY_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
+  ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/lib"
+  PDB_OUTPUT_DIRECTORY     "${CMAKE_BINARY_DIR}/bin")
 #   filter_mask.cpp
 #   filter_mask_gaussian.cpp
 #   filter_mask_ideal.cpp
-- 
2.34.1

