From b9ee406c5c903ac645d280840d4db3de4cd55ed3 Mon Sep 17 00:00:00 2001
From: Jordan Williams <jordan@jwillikers.com>
Date: Mon, 22 Apr 2024 15:03:50 -0500
Subject: [PATCH 19/21] meson: Define _DARWIN_C_SOURCE on macOS as is done in
 Autotools

Signed-off-by: Jordan Williams <jordan@jwillikers.com>
(cherry picked from commit 31ed0a8b42e1c036a59633f0a016dd05c22554cd)
---
 meson.build | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/meson.build b/meson.build
index c4aec5db92..8ba03ca760 100644
--- a/meson.build
+++ b/meson.build
@@ -41,6 +41,10 @@ vendordir = get_option('vendordir')
 
 add_project_arguments('-D_GNU_SOURCE', language : 'c')
 
+if host_machine.system() == 'darwin'
+  add_project_arguments('-D_DARWIN_C_SOURCE', language : 'c')
+endif
+
 cc = meson.get_compiler('c')
 
 conf = configuration_data()
-- 
2.44.0

