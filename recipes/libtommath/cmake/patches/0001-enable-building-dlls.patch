diff --git a/CMakeLists.txt b/CMakeLists.txt
index 0b84e79..04dea2e 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -107,6 +107,14 @@ add_library(${PROJECT_NAME}
     ${HEADERS}
 )
 
+if(BUILD_SHARED_LIBS AND MSVC)
+  target_sources(${PROJECT_NAME} PRIVATE "tommath.def")
+endif()
+
+if(WIN32 AND NOT MSVC)
+  target_link_libraries(${PROJECT_NAME} PRIVATE crypt32)
+endif()
+
 target_include_directories(${PROJECT_NAME} PUBLIC
     $<BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}>
     $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}/${PROJECT_NAME}>
