diff --git a/libcharset/Makefile.in b/libcharset/Makefile.in
index 5f599fe..e6ba91a 100644
--- a/libcharset/Makefile.in
+++ b/libcharset/Makefile.in
@@ -30,25 +30,22 @@ mkinstalldirs = $(SHELL) @top_srcdir@/build-aux/mkinstalldirs
 
 SHELL = @SHELL@
 
-all : include/libcharset.h force
+all : force
 	cd lib && $(MAKE) all
 
-include/libcharset.h :
-	if [ ! -d include ] ; then mkdir include ; fi
-	$(CP) $(srcdir)/include/libcharset.h.in include/libcharset.h
-
 # Installs the library and include files only. Typically called with only
 # $(libdir) and $(includedir) - don't use $(prefix) and $(exec_prefix) here.
 install-lib : all force
 	cd lib && $(MAKE) install-lib libdir='$(libdir)' includedir='$(includedir)'
 	$(mkinstalldirs) $(includedir)
-	$(INSTALL_DATA) include/libcharset.h $(includedir)/libcharset.h
-	$(INSTALL_DATA) include/localcharset.h.inst $(includedir)/localcharset.h
+	$(INSTALL_DATA) include/libcharset.h.inst $(includedir)/libcharset.h
+# Here, use the include file that contains LIBCHARSET_DLL_EXPORTED annotations.
+	$(INSTALL_DATA) include/localcharset.h $(includedir)/localcharset.h
 
-install : include/libcharset.h include/localcharset.h force
+install : all force
 	cd lib && $(MAKE) install prefix='$(prefix)' exec_prefix='$(exec_prefix)' libdir='$(libdir)'
 	$(mkinstalldirs) $(DESTDIR)$(includedir)
-	$(INSTALL_DATA) include/libcharset.h $(DESTDIR)$(includedir)/libcharset.h
+	$(INSTALL_DATA) include/libcharset.h.inst $(DESTDIR)$(includedir)/libcharset.h
 	$(INSTALL_DATA) include/localcharset.h.inst $(DESTDIR)$(includedir)/localcharset.h
 
 install-strip : install
@@ -73,12 +70,12 @@ clean : force
 
 distclean : force
 	cd lib && if test -f Makefile; then $(MAKE) distclean; fi
-	$(RM) include/libcharset.h include/localcharset.h include/localcharset.h.inst
+	$(RM) include/libcharset.h include/libcharset.h.inst include/localcharset.h include/localcharset.h.inst
 	$(RM) config.status config.log config.cache Makefile config.h libtool
 
 maintainer-clean : force
 	cd lib && if test -f Makefile; then $(MAKE) maintainer-clean; fi
-	$(RM) include/libcharset.h include/localcharset.h include/localcharset.h.inst
+	$(RM) include/libcharset.h include/libcharset.h.inst include/localcharset.h include/localcharset.h.inst
 	$(RM) config.status config.log config.cache Makefile config.h libtool
 
 # List of source files.
@@ -133,6 +130,7 @@ IMPORTED_FILES = \
 # List of distributed files generated by autotools or Makefile.devel.
 GENERATED_FILES = \
   autoconf/aclocal.m4 configure config.h.in \
+  include/libcharset.h.build.in \
   include/localcharset.h.build.in
 # List of distributed files generated by "make".
 DISTRIBUTED_BUILT_FILES =
diff --git a/libcharset/configure b/libcharset/configure
index cf4f9d2..8844aca 100755
--- a/libcharset/configure
+++ b/libcharset/configure
@@ -12346,6 +12346,10 @@ ac_config_files="$ac_config_files Makefile"
 
 ac_config_files="$ac_config_files lib/Makefile"
 
+ac_config_files="$ac_config_files include/libcharset.h:include/libcharset.h.build.in"
+
+ac_config_files="$ac_config_files include/libcharset.h.inst:include/libcharset.h.in"
+
 ac_config_files="$ac_config_files include/localcharset.h:include/localcharset.h.build.in"
 
 ac_config_files="$ac_config_files include/localcharset.h.inst:include/localcharset.h.in"
@@ -13346,6 +13350,8 @@ do
     "libtool") CONFIG_COMMANDS="$CONFIG_COMMANDS libtool" ;;
     "Makefile") CONFIG_FILES="$CONFIG_FILES Makefile" ;;
     "lib/Makefile") CONFIG_FILES="$CONFIG_FILES lib/Makefile" ;;
+    "include/libcharset.h") CONFIG_FILES="$CONFIG_FILES include/libcharset.h:include/libcharset.h.build.in" ;;
+    "include/libcharset.h.inst") CONFIG_FILES="$CONFIG_FILES include/libcharset.h.inst:include/libcharset.h.in" ;;
     "include/localcharset.h") CONFIG_FILES="$CONFIG_FILES include/localcharset.h:include/localcharset.h.build.in" ;;
     "include/localcharset.h.inst") CONFIG_FILES="$CONFIG_FILES include/localcharset.h.inst:include/localcharset.h.in" ;;
 
diff --git a/libcharset/configure.ac b/libcharset/configure.ac
index 362bde3..a071d25 100644
--- a/libcharset/configure.ac
+++ b/libcharset/configure.ac
@@ -60,6 +60,8 @@ AC_CHECK_FUNCS([setlocale])
 
 AC_CONFIG_FILES([Makefile])
 AC_CONFIG_FILES([lib/Makefile])
+AC_CONFIG_FILES([include/libcharset.h:include/libcharset.h.build.in])
+AC_CONFIG_FILES([include/libcharset.h.inst:include/libcharset.h.in])
 AC_CONFIG_FILES([include/localcharset.h:include/localcharset.h.build.in])
 AC_CONFIG_FILES([include/localcharset.h.inst:include/localcharset.h.in])
 AC_OUTPUT
diff --git a/libcharset/include/libcharset.h.build.in b/libcharset/include/libcharset.h.build.in
new file mode 100644
index 0000000..46e911a
--- /dev/null
+++ b/libcharset/include/libcharset.h.build.in
@@ -0,0 +1,53 @@
+/* Copyright (C) 2003 Free Software Foundation, Inc.
+   This file is part of the GNU CHARSET Library.
+
+   The GNU CHARSET Library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public License as
+   published by the Free Software Foundation; either version 2 of the
+   License, or (at your option) any later version.
+
+   The GNU CHARSET Library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+
+   You should have received a copy of the GNU Lesser General Public License
+   along with the GNU CHARSET Library; see the file COPYING.LIB.  If not,
+   see <https://www.gnu.org/licenses/>.  */
+
+#ifndef _LIBCHARSET_H
+#define _LIBCHARSET_H
+
+#if @HAVE_VISIBILITY@ && BUILDING_LIBCHARSET
+#define LIBCHARSET_DLL_EXPORTED __attribute__((__visibility__("default")))
+#elif defined _MSC_VER && BUILDING_LIBCHARSET
+#define LIBCHARSET_DLL_EXPORTED __declspec(dllexport)
+#else
+#define LIBCHARSET_DLL_EXPORTED
+#endif
+
+#include <localcharset.h>
+
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+
+/* Support for relocatable packages.  */
+
+/* Sets the original and the current installation prefix of the package.
+   Relocation simply replaces a pathname starting with the original prefix
+   by the corresponding pathname with the current prefix instead.  Both
+   prefixes should be directory names without trailing slash (i.e. use ""
+   instead of "/").  */
+extern LIBCHARSET_DLL_EXPORTED void libcharset_set_relocation_prefix (const char *orig_prefix,
+                                              const char *curr_prefix);
+
+
+#ifdef __cplusplus
+}
+#endif
+
+
+#endif /* _LIBCHARSET_H */
