From 4d5a57343a8cb54a787b68c42a6b2379bbce2a84 Mon Sep 17 00:00:00 2001
From: Martin Valgur <martin.valgur@gmail.com>
Date: Fri, 6 Sep 2024 19:04:24 +0300
Subject: [PATCH 1/2] Rename find_dependency() to avoid with official version

---
 CMakeLists.txt                     | 4 ++--
 cdk/CMakeLists.txt                 | 8 ++++----
 cdk/cmake/dependency.cmake         | 6 +++---
 cdk/protocol/mysqlx/CMakeLists.txt | 4 ++--
 4 files changed, 11 insertions(+), 11 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4d747849..65b043a5 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -177,7 +177,7 @@ endif()
 # Gcov support (Linux only)
 #
 
-find_dependency(Coverage)  # defines add_coverage() command
+find_dep(Coverage)  # defines add_coverage() command
 #message("WITH_COVERAGE: ${WITH_COVERAGE}")
 
 
@@ -306,7 +306,7 @@ endif()
 # Note: Find OpenSSL early because it is needed by both CDK and JDBC (in case
 # of static linking with the client library)
 
-find_dependency(SSL)
+find_dep(SSL)
 
 
 #
diff --git a/cdk/CMakeLists.txt b/cdk/CMakeLists.txt
index dc8e3adc..4a9a164d 100644
--- a/cdk/CMakeLists.txt
+++ b/cdk/CMakeLists.txt
@@ -93,10 +93,10 @@ add_config(CDK_BIG_ENDIAN ${BIG_ENDIAN})
 #  Dependencies
 #
 
-find_dependency(SSL)
-#find_dependency(Protobuf)
-find_dependency(RapidJSON)
-find_dependency(Coverage)
+find_dep(SSL)
+#find_dep(Protobuf)
+find_dep(RapidJSON)
+find_dep(Coverage)
 
 
 # TODO: These macros should not be used in public headers because they are
diff --git a/cdk/cmake/dependency.cmake b/cdk/cmake/dependency.cmake
index e3fec4ee..3c38ca5c 100644
--- a/cdk/cmake/dependency.cmake
+++ b/cdk/cmake/dependency.cmake
@@ -33,20 +33,20 @@ include(config_options)
 
 ##########################################################################
 #
-# find_dependency(XXX) command.
+# find_dep(XXX) command.
 #
 # Currently it is looking for DepFindXXX.cmake script that should perform
 # all steps required to locate given dependency and make it available in
 # the project. It is a layer on top of find_module().
 #
 
-function(find_dependency NAME)
+macro(find_dep NAME)
 
   # TODO: Fallback to find_module()
 
   include(DepFind${NAME})
 
-endfunction(find_dependency)
+endmacro(find_dep)
 
 
 # Variables to forward from this build configuration to external
diff --git a/cdk/protocol/mysqlx/CMakeLists.txt b/cdk/protocol/mysqlx/CMakeLists.txt
index a9873127..2ee4f937 100644
--- a/cdk/protocol/mysqlx/CMakeLists.txt
+++ b/cdk/protocol/mysqlx/CMakeLists.txt
@@ -26,8 +26,8 @@
 # along with this program; if not, write to the Free Software Foundation, Inc.,
 # 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA
 
-find_dependency(Protobuf)
-find_dependency(Compression)
+find_dep(Protobuf)
+find_dep(Compression)
 
 include(CheckIncludeFile)
 
