From 60d1ce9911e6b32ea0c5a2fcfc120f9b392d5643 Mon Sep 17 00:00:00 2001
From: Derek Mauro <dmauro@google.com>
Date: Tue, 7 Jan 2025 07:47:25 -0800
Subject: [PATCH] Import of CCTZ from GitHub.

PiperOrigin-RevId: 712908937
Change-Id: Ifdd783bb4415209a7241131feb79460adb360f64
---
 absl/time/internal/cctz/BUILD.bazel | 15 ++++++++++++++-
 1 file changed, 14 insertions(+), 1 deletion(-)

diff --git a/absl/time/internal/cctz/BUILD.bazel b/absl/time/internal/cctz/BUILD.bazel
index a2d9c336..da30a0f1 100644
--- a/absl/time/internal/cctz/BUILD.bazel
+++ b/absl/time/internal/cctz/BUILD.bazel
@@ -12,6 +12,8 @@
 #   See the License for the specific language governing permissions and
 #   limitations under the License.

+load("//absl:copts/configure_copts.bzl", "ABSL_DEFAULT_COPTS", "ABSL_DEFAULT_LINKOPTS", "ABSL_TEST_COPTS")
+
 package(features = [
     "header_modules",
     "layering_check",
@@ -28,6 +30,8 @@ cc_library(
     hdrs = [
         "include/cctz/civil_time.h",
     ],
+    copts = ABSL_DEFAULT_COPTS,
+    linkopts = ABSL_DEFAULT_LINKOPTS,
     textual_hdrs = ["include/cctz/civil_time_detail.h"],
     visibility = ["//visibility:public"],
     deps = ["//absl/base:config"],
@@ -57,7 +61,8 @@ cc_library(
         "include/cctz/time_zone.h",
         "include/cctz/zone_info_source.h",
     ],
-    linkopts = select({
+    copts = ABSL_DEFAULT_COPTS,
+    linkopts = ABSL_DEFAULT_LINKOPTS + select({
         "@platforms//os:osx": ["-Wl,-framework,CoreFoundation"],
         "@platforms//os:ios": ["-Wl,-framework,CoreFoundation"],
         "//conditions:default": [],
@@ -84,6 +89,8 @@ cc_test(
     name = "civil_time_test",
     size = "small",
     srcs = ["src/civil_time_test.cc"],
+    copts = ABSL_TEST_COPTS,
+    linkopts = ABSL_DEFAULT_LINKOPTS,
     deps = [
         ":civil_time",
         "//absl/base:config",
@@ -96,7 +103,9 @@ cc_test(
     name = "time_zone_format_test",
     size = "small",
     srcs = ["src/time_zone_format_test.cc"],
+    copts = ABSL_TEST_COPTS,
     data = [":zoneinfo"],
+    linkopts = ABSL_DEFAULT_LINKOPTS,
     tags = [
         "no_test_android_arm",
         "no_test_android_arm64",
@@ -117,7 +126,9 @@ cc_test(
     size = "small",
     timeout = "moderate",
     srcs = ["src/time_zone_lookup_test.cc"],
+    copts = ABSL_TEST_COPTS,
     data = [":zoneinfo"],
+    linkopts = ABSL_DEFAULT_LINKOPTS,
     tags = [
         "no_test_android_arm",
         "no_test_android_arm64",
@@ -144,6 +155,8 @@ cc_test(
         "src/time_zone_info.h",
         "src/tzfile.h",
     ],
+    copts = ABSL_TEST_COPTS,
+    linkopts = ABSL_DEFAULT_LINKOPTS,
     linkstatic = 1,
     tags = ["benchmark"],
     deps = [
--
2.43.0
