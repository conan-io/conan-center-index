--- a/cmake/arch.cmake
+++ b/cmake/arch.cmake
@@ -35,9 +35,14 @@ if (USE_OPENMP)
   # USE_SIMPLE_THREADED_LEVEL3 = 1
   # NO_AFFINITY = 1
   find_package(OpenMP REQUIRED)
-  if (OpenMP_FOUND)
-    set(CCOMMON_OPT "${CCOMMON_OPT} ${OpenMP_C_FLAGS} -DUSE_OPENMP")
-    set(FCOMMON_OPT "${FCOMMON_OPT} ${OpenMP_Fortran_FLAGS}")
+  if(OpenMP_FOUND)  # TODO: use OpenMP_C_FOUND when llvm-openmp has been fixed
+    set(CCOMMON_OPT "${CCOMMON_OPT} -DUSE_OPENMP")
+    link_libraries($<$<LINK_LANGUAGE:C>:OpenMP::OpenMP_C>)
+    include_directories(${OpenMP_C_INCLUDE_DIRS})
+  endif()
+  if(OpenMP_Fortran_FOUND)
+    link_libraries($<$<LINK_LANGUAGE:Fortran>:OpenMP::OpenMP_Fortran>)
+    include_directories(${OpenMP_Fortran_INCLUDE_DIRS})
   endif()
 endif ()
 
