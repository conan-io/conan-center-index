diff --git a/CMakeLists.txt b/CMakeLists.txt
index 57cd95d..5940893 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -118,15 +118,15 @@ else (USE_EXT_GD)
 	endif (ENABLE_ICONV)
 
 	IF (ENABLE_WEBP)
-		FIND_PACKAGE(WEBP REQUIRED)
+		FIND_PACKAGE(WebP REQUIRED)
 	ENDIF (ENABLE_WEBP)
 
 	IF (ENABLE_HEIF)
-		FIND_PACKAGE(HEIF REQUIRED)
+		FIND_PACKAGE(libheif REQUIRED)
 	ENDIF (ENABLE_HEIF)
 
 	IF (ENABLE_AVIF)
-		FIND_PACKAGE(libavif 0.8.2 REQUIRED CONFIG)
+		FIND_PACKAGE(libavif REQUIRED CONFIG)
 		SET(HAVE_LIBAVIF 1)
 		SET(AVIF_LIBRARIES avif)
 		SET(AVIF_FOUND 1)
@@ -153,7 +153,7 @@ else (USE_EXT_GD)
 	endif (ENABLE_FREETYPE)
 
 	if (ENABLE_XPM)
-		FIND_PACKAGE(XPM REQUIRED)
+		FIND_PACKAGE(libxpm REQUIRED)
 	endif (ENABLE_XPM)
 
 	if (ENABLE_FONTCONFIG)
@@ -180,7 +180,7 @@ else (USE_EXT_GD)
 	ENDIF(ZLIB_FOUND)
 
 	IF(WEBP_FOUND)
-		INCLUDE_DIRECTORIES(${WEBP_INCLUDE_DIR})
+		INCLUDE_DIRECTORIES(${WebP_INCLUDE_DIR})
 		SET(HAVE_LIBWEBP 1)
 	ENDIF(WEBP_FOUND)
 
@@ -207,12 +207,12 @@ else (USE_EXT_GD)
 	ENDIF(LIQ_FOUND)
 
 	IF(XPM_FOUND)
-		INCLUDE_DIRECTORIES(${XPM_INCLUDE_DIR})
+		INCLUDE_DIRECTORIES(${libxpm_INCLUDE_DIR})
 		SET(HAVE_LIBXPM 1)
 		LIST(APPEND PKG_REQUIRES_PRIVATES xpm)
 	ENDIF(XPM_FOUND)
 
-	IF(JPEG_FOUND)
+	IF(ENABLE_JPEG AND JPEG_FOUND)
 		INCLUDE_DIRECTORIES(${JPEG_INCLUDE_DIR})
 		SET(HAVE_LIBJPEG 1)
 		LIST(APPEND PKG_REQUIRES_PRIVATES libjpeg)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 1d1be42..a4da08f 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -122,15 +122,15 @@ INCLUDE_DIRECTORIES(BEFORE "${PROJECT_BINARY_DIR}" "${CMAKE_BINARY_DIR}" "${GD_S
 
 SET(LIBGD_DEP_LIBS
 	${ZLIB_LIBRARIES}
-	${FREETYPE_LIBRARIES}
+	${freetype_LIBRARIES}
 	${PNG_LIBRARIES}
 	${ICONV_LIBRARIES}
 	${LIQ_LIBRARIES}
 	${JPEG_LIBRARIES}
 	${TIFF_LIBRARIES}
-	${XPM_LIBRARIES}
+	${libxpm_LIBRARIES}
 	${FONTCONFIG_LIBRARY}
-	${WEBP_LIBRARIES}
+	${WebP_LIBRARIES}
 	${AVIF_LIBRARIES}
 	${RAQM_LIBRARIES}
 	${HEIF_LIBRARIES}
@@ -145,7 +145,7 @@ endif()
 SET(LIBS_PRIVATES
 	${ICONV_LIBRARIES}
 	${LIQ_LIBRARIES}
-	${WEBP_LIBRARIES}
+	${WebP_LIBRARIES}
 )
 
 set(GD_PROGRAMS gdcmpgif)
