diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6b3e5b3..22018e9 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -134,15 +134,15 @@ else (USE_EXT_GD)
 	endif (ENABLE_ICONV)
 
 	IF (ENABLE_WEBP)
-		FIND_PACKAGE(WEBP REQUIRED)
+		FIND_PACKAGE(WebP REQUIRED)
 	ENDIF (ENABLE_WEBP)
 
 	IF (ENABLE_HEIF)
-		FIND_PACKAGE(HEIF REQUIRED)
+		FIND_PACKAGE(libheif REQUIRED)
 	ENDIF (ENABLE_HEIF)
 
 	IF (ENABLE_AVIF)
-		FIND_PACKAGE(libavif 0.8.2 REQUIRED CONFIG)
+		FIND_PACKAGE(libavif REQUIRED CONFIG)
 		SET(HAVE_LIBAVIF 1)
 		SET(AVIF_LIBRARIES avif)
 		SET(AVIF_FOUND 1)
@@ -169,7 +169,7 @@ else (USE_EXT_GD)
 	endif (ENABLE_FREETYPE)
 
 	if (ENABLE_XPM)
-		FIND_PACKAGE(XPM REQUIRED)
+		FIND_PACKAGE(libxpm REQUIRED)
 	endif (ENABLE_XPM)
 
 	if (ENABLE_FONTCONFIG)
@@ -196,7 +196,7 @@ else (USE_EXT_GD)
 	ENDIF(ZLIB_FOUND)
 
 	IF(WEBP_FOUND)
-		INCLUDE_DIRECTORIES(${WEBP_INCLUDE_DIR})
+		INCLUDE_DIRECTORIES(${WebP_INCLUDE_DIR})
 		SET(HAVE_LIBWEBP 1)
 	ENDIF(WEBP_FOUND)
 
@@ -223,12 +223,12 @@ else (USE_EXT_GD)
 	ENDIF(LIQ_FOUND)
 
 	IF(XPM_FOUND)
-		INCLUDE_DIRECTORIES(${XPM_INCLUDE_DIR})
+		INCLUDE_DIRECTORIES(${libxpm_INCLUDE_DIR})
 		SET(HAVE_LIBXPM 1)
 		LIST(APPEND PKG_REQUIRES_PRIVATES xpm)
 	ENDIF(XPM_FOUND)
 
-	IF(JPEG_FOUND)
+	IF(ENABLE_JPEG AND JPEG_FOUND)
 		INCLUDE_DIRECTORIES(${JPEG_INCLUDE_DIR})
 		SET(HAVE_LIBJPEG 1)
 		LIST(APPEND PKG_REQUIRES_PRIVATES libjpeg)
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 3b271a8..55a8095 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -102,15 +102,15 @@ INCLUDE_DIRECTORIES(BEFORE "${PROJECT_BINARY_DIR}" "${CMAKE_BINARY_DIR}" "${GD_S
 
 SET(LIBGD_DEP_LIBS
 	${ZLIB_LIBRARIES}
-	${FREETYPE_LIBRARIES}
+	${freetype_LIBRARIES}
 	${PNG_LIBRARIES}
 	${ICONV_LIBRARIES}
 	${LIQ_LIBRARIES}
 	${JPEG_LIBRARIES}
 	${TIFF_LIBRARIES}
-	${XPM_LIBRARIES}
+	${libxpm_LIBRARIES}
 	${FONTCONFIG_LIBRARY}
-	${WEBP_LIBRARIES}
+	${WebP_LIBRARIES}
 	${AVIF_LIBRARIES}
 	${RAQM_LIBRARIES}
 	${HEIF_LIBRARIES}
@@ -125,7 +125,7 @@ endif()
 SET(LIBS_PRIVATES
 	${ICONV_LIBRARIES}
 	${LIQ_LIBRARIES}
-	${WEBP_LIBRARIES}
+	${WebP_LIBRARIES}
 )
 
 set(GD_PROGRAMS gdcmpgif)
