diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6b3e5b3..2b71c74 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -142,7 +142,7 @@ else (USE_EXT_GD)
 	ENDIF (ENABLE_HEIF)
 
 	IF (ENABLE_AVIF)
-		FIND_PACKAGE(libavif 0.8.2 REQUIRED CONFIG)
+		FIND_PACKAGE(libavif REQUIRED CONFIG)
 		SET(HAVE_LIBAVIF 1)
 		SET(AVIF_LIBRARIES avif)
 		SET(AVIF_FOUND 1)
@@ -228,11 +228,11 @@ else (USE_EXT_GD)
 		LIST(APPEND PKG_REQUIRES_PRIVATES xpm)
 	ENDIF(XPM_FOUND)
 
-	IF(JPEG_FOUND)
+	IF(ENABLE_JPEG AND JPEG_FOUND)
 		INCLUDE_DIRECTORIES(${JPEG_INCLUDE_DIR})
 		SET(HAVE_LIBJPEG 1)
 		LIST(APPEND PKG_REQUIRES_PRIVATES libjpeg)
-	ENDIF(JPEG_FOUND)
+	ENDIF()
 
 	IF(TIFF_FOUND)
 		INCLUDE_DIRECTORIES(${TIFF_INCLUDE_DIR})
