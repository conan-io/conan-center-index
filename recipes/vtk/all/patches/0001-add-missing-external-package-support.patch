From d17b443dbb27e415eb2cbbcc2c0fa4dc64a46e37 Mon Sep 17 00:00:00 2001
From: Martin Valgur <martin.valgur@gmail.com>
Date: Thu, 1 Aug 2024 13:52:40 +0300
Subject: [PATCH] add missing external package support to some deps

---
 ThirdParty/kissfft/CMakeLists.txt | 19 ++++++++++++-------
 ThirdParty/zfp/CMakeLists.txt     | 29 +++++++++++++++++------------
 2 files changed, 29 insertions(+), 19 deletions(-)

diff --git a/ThirdParty/kissfft/CMakeLists.txt b/ThirdParty/kissfft/CMakeLists.txt
index b93deb8864..4fdecd0e51 100644
--- a/ThirdParty/kissfft/CMakeLists.txt
+++ b/ThirdParty/kissfft/CMakeLists.txt
@@ -1,12 +1,17 @@
 set(KISSFFT_SCALAR_TYPE "double")
 
-vtk_module_third_party_internal(
-  LICENSE_FILES           "vtkkissfft/COPYING"
-  SPDX_LICENSE_IDENTIFIER "BSD-3-Clause"
-  SPDX_COPYRIGHT_TEXT     "Copyright (c) 2003-2010 Mark Borgerding"
-  SPDX_DOWNLOAD_LOCATION  "git+https://gitlab.kitware.com/third-party/kissfft.git@for/vtk-20211123-master-g6f09c27"
-  VERSION                 "master"
-  STANDARD_INCLUDE_DIRS)
+vtk_module_third_party(
+  INTERNAL
+    LICENSE_FILES           "vtkkissfft/COPYING"
+    SPDX_LICENSE_IDENTIFIER "BSD-3-Clause"
+    SPDX_COPYRIGHT_TEXT     "Copyright (c) 2003-2010 Mark Borgerding"
+    SPDX_DOWNLOAD_LOCATION  "git+https://gitlab.kitware.com/third-party/kissfft.git@for/vtk-20211123-master-g6f09c27"
+    VERSION                 "master"
+    STANDARD_INCLUDE_DIRS
+  EXTERNAL
+    PACKAGE kissfft
+    TARGETS kissfft::kissfft
+    STANDARD_INCLUDE_DIRS)
 
 configure_file(
   "${CMAKE_CURRENT_SOURCE_DIR}/vtk_kissfft.h.in"
diff --git a/ThirdParty/zfp/CMakeLists.txt b/ThirdParty/zfp/CMakeLists.txt
index 9039e12c65..d55fed6997 100644
--- a/ThirdParty/zfp/CMakeLists.txt
+++ b/ThirdParty/zfp/CMakeLists.txt
@@ -1,15 +1,20 @@
-vtk_module_third_party_internal(
-  LICENSE_FILES
-    "vtkzfp/LICENSE"
-  SPDX_LICENSE_IDENTIFIER
-    "BSD-3-Clause"
-  SPDX_COPYRIGHT_TEXT
-    "Copyright (c) 2014-2019, Lawrence Livermore National Security, LLC."
-  SPDX_DOWNLOAD_LOCATION
-    "git+https://gitlab.kitware.com/third-party/zfp.git@for/vtk-20190605-0.5.5"
-  VERSION
-    "0.5.5"
-  STANDARD_INCLUDE_DIRS)
+vtk_module_third_party(
+  INTERNAL
+    LICENSE_FILES
+      "vtkzfp/LICENSE"
+    SPDX_LICENSE_IDENTIFIER
+      "BSD-3-Clause"
+    SPDX_COPYRIGHT_TEXT
+      "Copyright (c) 2014-2019, Lawrence Livermore National Security, LLC."
+    SPDX_DOWNLOAD_LOCATION
+      "git+https://gitlab.kitware.com/third-party/zfp.git@for/vtk-20190605-0.5.5"
+    VERSION
+      "0.5.5"
+    STANDARD_INCLUDE_DIRS
+  EXTERNAL
+    PACKAGE zfp
+    TARGETS zfp::zfp
+    STANDARD_INCLUDE_DIRS)
 
 configure_file(
   "${CMAKE_CURRENT_SOURCE_DIR}/vtk_zfp.h.in"
-- 
2.43.0

