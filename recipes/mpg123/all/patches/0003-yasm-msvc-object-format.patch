--- ports/cmake/src/libmpg123/CMakeLists.txt
+++ ports/cmake/src/libmpg123/CMakeLists.txt
@@ -126,8 +126,10 @@
     endif()
     if((MSVC AND CMAKE_GENERATOR_PLATFORM STREQUAL "x64") OR (NOT MSVC AND CMAKE_SYSTEM_PROCESSOR MATCHES "([xX]86_|AMD|amd)64"))
         set(MACHINE amd64)
+        set(YASM_OBJECT_FORMAT win64)
     elseif((MSVC AND CMAKE_GENERATOR_PLATFORM MATCHES "|Win32") OR (NOT MSVC AND CMAKE_SYSTEM_PROCESSOR MATCHES "i.86"))
         set(MACHINE x86)
+        set(YASM_OBJECT_FORMAT win32)
     endif()
     list(TRANSFORM PLATFORM_DEFINITIONS PREPEND /D)
     foreach(FILE ${PLATFORM_SOURCES})
@@ -140,7 +142,7 @@
             WORKING_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}")
         add_custom_command(
             OUTPUT ${FILENAME}.obj
-            COMMAND ${YASM_ASSEMBLER} -a x86 -m ${MACHINE} -p gas -r raw -f win32 -g null -o ${FILENAME}.obj ${FILENAME}.asm
+            COMMAND ${YASM_ASSEMBLER} -a x86 -m ${MACHINE} -p gas -r raw -f ${YASM_OBJECT_FORMAT} -g null -o ${FILENAME}.obj ${FILENAME}.asm
             DEPENDS ${FILENAME}.asm
             WORKING_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}")
         target_sources(${TARGET} PRIVATE "${CMAKE_CURRENT_BINARY_DIR}/${FILENAME}.obj")
