exclude: |
    (?x)^(
        .idea/.*|
        assets/.*|
        docs/.*|
        linter/.*|
        recipes/.*|
        CONTRIBUTING.md
    )$
default_stages: [commit, manual]
repos:
    -   repo: https://github.com/pre-commit/pre-commit-hooks
        rev: v4.3.0
        hooks:
            -   id: trailing-whitespace
                args: [ --markdown-linebreak-ext=md ]
            -   id: end-of-file-fixer
            -   id: check-yaml
            -   id: check-added-large-files
            -   id: double-quote-string-fixer
            -   id: check-docstring-first
            -   id: debug-statements
    -   repo: https://github.com/PyCQA/flake8
        rev: 3.9.2
        hooks:
            -   id: flake8
    -   repo: https://github.com/pycqa/isort
        rev: 5.11.5
        hooks:
            -   id: isort
                name: isort (python)
    -   repo: https://github.com/executablebooks/mdformat
        rev: 0.7.14  # Use the ref you want to point at
        hooks:
            -   id: mdformat
                name: mdformat on non-.github files
                exclude: ^.github/
                args: [ '--wrap', '80', '--number' ]
                # Optionally add plugins
                additional_dependencies:
                    - mdformat-gfm
                    - mdformat-frontmatter
                    - mdformat-footnote
                    - mdformat-toc
            -   id: mdformat
                name: mdformat on .github files
                files: ^.github/.*$
                # Don't wrap the templates in .github; they don't look good in the description
                args: [ '--wrap', 'no', '--number' ]
                # Optionally add plugins
                additional_dependencies:
                    - mdformat-gfm
                    - mdformat-frontmatter
                    - mdformat-footnote
                    - mdformat-toc
    # pylint has to be run from inside the virtual environment, so it has access to all
    # the modules imported by a given Python modules.
    # See: https://pylint.pycqa.org/en/latest/user_guide/installation/pre-commit-integration.html#pre-commit-integration
    -   repo: local
        hooks:
            -   id: pylint
                name: pylint
                entry: pylint
                language: system
                types: [ python ]
                # only tasks are linted at present
                files: ^tasks/.*$
                args:
                  [
                      "-rn", # only display messages
                      "-sn", # don't display the score
                  ]
