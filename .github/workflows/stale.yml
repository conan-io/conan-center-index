# This workflow warns and then closes issues and PRs that have had no activity for a specified amount of time.
#
# You can adjust the behavior by modifying this file.
# For more information, see:
# https://github.com/actions/stale
name: Mark stale pull requests


on:
  schedule:
  - cron: '34 6 * * *'

jobs:
  stale:
    if: github.repository == 'conan-io/conan-center-index'

    runs-on: ubuntu-latest
    permissions:
      pull-requests: write
      issues: read


    steps:
    - uses: actions/stale@5f858e3efba33a5ca4407a664cc011ad407f2008 # v10.1.0
      with:
        # Do not make issues as stale
        days-before-issue-stale: -1
        # Number of days before stale PRs are closed
        days-before-pr-stale: 30


        # Do not close issues automatically
        days-before-issue-close: -1
        # Do not close pull requests automatically
        days-before-pr-close: -1

        # process older PRs first
        ascending: true

        # Labels on PRs exempted from stale
        exempt-pr-labels: blocked,infrastructure

        # Label to apply on staled PRs
        stale-pr-label: 'stale'

        # Skip issues when having stale state
        remove-issue-stale-when-updated: false
        ignore-issue-updates: true


        # Comment on the staled PRs
        stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity.
            Maintainers please provide updates on the status of this PR.
            Thank you for your contribution to Conan Center!

        # Comment on the staled PRs while closed
        close-pr-message: >
            This pull request has been automatically closed because it has not had
            recent activity. Thank you for your contributions.

        # Max number of operations per run
        operations-per-run: 30
